{"meta":{"title":"四野流云","subtitle":"和光同尘，与时舒卷","description":"前端","author":"siye","url":"http://www.zhanghc.life","root":"/"},"pages":[{"title":"个人简介","date":"2020-08-14T10:00:21.170Z","updated":"2020-08-14T10:00:21.170Z","comments":true,"path":"about/index.html","permalink":"http://www.zhanghc.life/about/index.html","excerpt":"","text":"关于我工作经验丰富的 Web-Font 搬砖工 头发脑茂密，没有打算秃头的90后大伙子 表情包爱好者，技术群装逼达人 爱听歌，不带耳机不舒服斯基星人 性格慢热，线上蹦迪，线下社恐的【奇葩】 小文青、大前端、geek 喜欢玩游戏、阅读、敲代码、长跑 喜欢/感兴趣的技术领域 website，前端架构 移动端（rn、flutter、Swift） web安全 爬虫 关于这个博客想要一个自己的”乌托邦”，如果可以，希望自己的思考能够给人带来一些影响 一些原则 尊重每个人，有女性的场合，不说黄段子 受到帮助，说【谢谢】，即便是义务 工作中尽量避免说【可能】、【应该】，抛出问题，不抱怨 崇尚有秩序的自由和人格独立，为了目标和价值达成共识，才有必要进行基本价值观念争论的必要 自居【君子】，并要求自己 以下我的一些联系方式 Mail：zh_c@foxmail.com 订阅：RSS"},{"title":"留言板","date":"2019-04-08T02:18:29.000Z","updated":"2020-08-14T10:06:29.353Z","comments":true,"path":"message/index.html","permalink":"http://www.zhanghc.life/message/index.html","excerpt":"","text":"你还可以使用以下邮箱联系到我： zh_c@foxmail.com tcsiye@gmail.com"},{"title":"tags","date":"2019-04-08T02:18:29.000Z","updated":"2020-07-06T07:57:52.796Z","comments":true,"path":"notes/index.html","permalink":"http://www.zhanghc.life/notes/index.html","excerpt":"","text":""},{"title":"tags","date":"2019-04-08T02:18:29.000Z","updated":"2020-07-06T07:57:41.059Z","comments":true,"path":"think/index.html","permalink":"http://www.zhanghc.life/think/index.html","excerpt":"","text":""}],"posts":[{"title":"一个简单的文件【打包、上传】自动小脚本","slug":"一个简单的前端文件打包-上传脚本","date":"2020-12-13T16:00:00.000Z","updated":"2021-02-01T09:00:44.820Z","comments":true,"path":"2020/12/14/一个简单的前端文件打包-上传脚本/","link":"","permalink":"http://www.zhanghc.life/2020/12/14/一个简单的前端文件打包-上传脚本/","excerpt":"","text":"前段时间写了一个前端文件上传小脚本，个人开发者或者部分前端人员可能会用到，它完成了打包到服务器的过程。这个脚本使用expect，所以在shell的环境才能使用。 1.完成功能步骤： npm打包前端工程； 登录服务器删除服务器中的文件； 上传npm打包后的文件； 2.模块： 有时需要执行单个步骤或者其他操作，所以，根据自己的需要，具体把它写成三块： main.bash - 线性流程，集合各个模块，避免异步流程错乱，包含npm build； server_act.bash - 使用ssh登录服务器，删除服务器中的指定的文件或目录（可以自行设置参数拓展脚本）； up_file.bash - 使用scp工具进行文件上传； 3.注意点： 脚本默认执行时间为30s，所以流程需要较长执行时间的步骤需要设置超时时间,单位：s，-1无限 set timeout -1 流程线性，需要注意流程步骤顺序 对于脚本安全性，如服务器密码，最好设置参数键入 注意使用内部路径，若使用相对路径，注意运行脚本的位置，否则可能找不到执行文件 4.具体代码如下： 1.main.bash 123456789101112######################################## 流程主文件#!/usr/bin/expectset timeout -1spawn npm run build expect eofspawn ./server_act.sh --rmeexpect eofspawn ./up_file.shinteract 2.server_act.bash 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950######################################## 登录文件服务器#!/usr/bin/expectset user root set ipaddress set passwd set timeout 30set port 60107set type [lindex $argv 0] set sourceDir set tagetDir spawn ssh $user@$ipaddress -p $port expect \"*password*\" send \"$&#123;passwd&#125;\\r\"expect \"*#\" send \"cd /opt/web\\r\"if &#123; $type ==\"--rm\" &#125; &#123;expect \"web]#\" send \"rm -rI gswl-ibhp\\r\"expect \"**remove 1 argument recursively?\" send \"y\\r\"expect \"web]#\" send \"ll\\r\" &#125; if &#123; $type ==\"--rme\" &#125; &#123;expect \"web]#\" send \"rm -rI gswl-ibhp\\r\"expect \"**remove 1 argument recursively?\" send \"y\\r\"expect \"web]#\" send \"ll\\r\"expect \"*#\" send \"exit\\r\"&#125; else &#123; interact &#125; 3.up_file.bash 1234567891011121314######################################## 上传文件#!/usr/bin/expectset user root set ip set passwd set port set sourceDir /.../set tagetDir /.../set timeout -1spawn scp -P $port -r $sourceDir root@$ip:$tagetDirexpect \"*assword:\" &#123; send \"$passwd\\n\"&#125;expect eof","categories":[],"tags":[]},{"title":"把旧文章下架了","slug":"把旧文章都下架了","date":"2020-08-13T16:00:00.000Z","updated":"2020-08-20T07:17:34.354Z","comments":true,"path":"2020/08/14/把旧文章都下架了/","link":"","permalink":"http://www.zhanghc.life/2020/08/14/把旧文章都下架了/","excerpt":"","text":"昨天看到这个geek简约风主题后，决定替换掉原先自己是设计花里胡哨的主题，做了一些修改，换上了这个主题，顺便把github page上迁移了过来。 技术的生命周期越来越短，更新迭代越来越快，刚毕业开始工作使用的部分主流技术，或已被新技术替代，中文检索关于技术口水文很多，但也有些文章质量还是挺高的，技术细节写比我整理的更全面，而且“科学上网”后通过都能够检索出来，比起我刚刚毕业时的毛头小子写的技术文章大家可能更愿意看 stackoverflow，那个时候写的技术文章并没有经过精雕细琢，仅提供解决思路的方向，没花太多的心思，demo也比较少，对于两三年前的技术，实在没有多余的精力去整理。所以把旧文的技术文章下架了。","categories":[],"tags":[]}]}